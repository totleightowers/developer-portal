---
owner_slack: "#analytical-platform-notifications"
title: Analytical Platform ingestion
last_reviewed_on: 2026-02-17
review_in: 6 months
source_repo: ministryofjustice/analytical-platform
source_path: diagrams/architecture-diagrams/ap-ingestion.html.md.erb
ingested_at: "2026-02-27T17:24:05.272Z"
---

# 

The AP offers a number of ways for users and data engineers to move data onto the platform. We collectively refer to these services as "ingestion".

In general, ingested data will intially be transferred to "landing" S3 buckets, before being moved to "production" buckets from which users can access the data.

- **Ingestion service (Secure FTP).** A service managed by the AP team which allows external teams (suppliers) to transfer data from their services to the AP
- **Register my data.** This service is configured by YAML files in a [GitHub repository](https://github.com/ministryofjustice/register-my-data). It allows users to configure an S3 location on the AP with write permissions, providing them with a way to automate data transfers to the AP.
- **Data uploader.** This is a web application which allows users to upload their own data to S3 without requiring the intervention of date engineers or AP support. Data is registered in Glue and is avaiable to query in Athena or other tooling via access to S3 buckets.
- **Managed pipelines.** The are managed by data engineers and transfer data from production operational systems such as NOMIS.

## Ingestion service

This service allows external providers of data a mechanism for copying data to the AP in a secure and safe way. In short:

- We use AWS transfer family to expose a secure FTP (SFTP) connection using SSH authentication
- Data uploaded via SFTP arrives in an encrypted S3 landing bucket
- AWS GuardDuty scans files in the landing bucket:
  - Files with no threats identified trigger a lambda function to copy them to a destination bucket in the `data-production` account where they can be accessed for analysis
  - Files with threats identified are moved to a quarantine bucket
  - In either scenario, files are removed from the landing bucket once one of the above operations completes
- SNS topics are used to notify users of the various events

For runbooks and further technical information, please refer to our internal team pages:

- [Maintenance](https://loop.cloud.microsoft/p/eyJ3Ijp7InUiOiJodHRwczovL2p1c3RpY2V1ay5zaGFyZXBvaW50LmNvbS8%2FbmF2PWN6MGxNa1ltWkQxaUlVd3pkMnRqVkdKcVRHdExVamhRVjNSbGNYWllTalJrT1RVelpGTlFOMXBLYWxkaVZHMVBNVFJHY2pkT1FtZDJSVFU1ZW1SVWNWcHhkVXBHZVU1aGNsWW1aajB3TVVwSk5rdExOVm96VVVsUU5qVkdWVTlYTlVoTVVVUXpTVFF6VnpSWFVEWlZKbU05Sm1ac2RXbGtQVEUlM0QiLCJyIjpmYWxzZX0sInAiOnsidSI6Imh0dHBzOi8vanVzdGljZXVrLnNoYXJlcG9pbnQuY29tL2NvbnRlbnRzdG9yYWdlL0NTUF83MTI0N2MyZi1lMzM2LTQyMmUtOTFmMC1mNWFkN2FhYmQ3MjcvRG9jdW1lbnQlMjBMaWJyYXJ5L0xvb3BBcHBEYXRhL01haW50ZW5hbmNlLmxvb3A%2FbmF2PWN6MGxNa1pqYjI1MFpXNTBjM1J2Y21GblpTVXlSa05UVUY4M01USTBOMk15WmkxbE16TTJMVFF5TW1VdE9URm1NQzFtTldGa04yRmhZbVEzTWpjbVpEMWlJVXd6ZDJ0alZHSnFUR3RMVWpoUVYzUmxjWFpZU2pSa09UVXpaRk5RTjFwS2FsZGlWRzFQTVRSR2NqZE9RbWQyUlRVNWVtUlVjVnB4ZFVwR2VVNWhjbFltWmowd01VcEpOa3RMTlRaUE1sQkZWMU5MU2t0SU5VRk1URlpIUWtaUVNWUkJORk5USm1NOUpUSkdKbVpzZFdsa1BURSUzRCIsInIiOmZhbHNlfSwiaSI6eyJpIjoiOTU1NTVmZTAtMTFmMi00YmMyLTk1ZmUtNTFhZTZjOGVkOTlhIn19)
- [Troubleshooting](https://loop.cloud.microsoft/p/eyJ3Ijp7InUiOiJodHRwczovL2p1c3RpY2V1ay5zaGFyZXBvaW50LmNvbS8%2FbmF2PWN6MGxNa1ltWkQxaUlVd3pkMnRqVkdKcVRHdExVamhRVjNSbGNYWllTalJrT1RVelpGTlFOMXBLYWxkaVZHMVBNVFJHY2pkT1FtZDJSVFU1ZW1SVWNWcHhkVXBHZVU1aGNsWW1aajB3TVVwSk5rdExOVm96VVVsUU5qVkdWVTlYTlVoTVVVUXpTVFF6VnpSWFVEWlZKbU05Sm1ac2RXbGtQVEUlM0QiLCJyIjpmYWxzZX0sInAiOnsidSI6Imh0dHBzOi8vanVzdGljZXVrLnNoYXJlcG9pbnQuY29tL2NvbnRlbnRzdG9yYWdlL0NTUF83MTI0N2MyZi1lMzM2LTQyMmUtOTFmMC1mNWFkN2FhYmQ3MjcvRG9jdW1lbnQlMjBMaWJyYXJ5L0xvb3BBcHBEYXRhL1Ryb3VibGVzaG9vdGluZy5sb29wP25hdj1jejBsTWtaamIyNTBaVzUwYzNSdmNtRm5aU1V5UmtOVFVGODNNVEkwTjJNeVppMWxNek0yTFRReU1tVXRPVEZtTUMxbU5XRmtOMkZoWW1RM01qY21aRDFpSVV3emQydGpWR0pxVEd0TFVqaFFWM1JsY1haWVNqUmtPVFV6WkZOUU4xcEthbGRpVkcxUE1UUkdjamRPUW1kMlJUVTVlbVJVY1ZweGRVcEdlVTVoY2xZbVpqMHdNVXBKTmt0TE5UWXpWMGxMV0VSVk4xZGFWa1JLVmtGTE56VllRekpXVTFZeUptTTlKVEpHSm1ac2RXbGtQVEUlM0QiLCJyIjpmYWxzZX0sImkiOnsiaSI6Ijk1NTU1ZmUwLTExZjItNGJjMi05NWZlLTUxYWU2YzhlZDk5MCJ9fQ%3D%3D)
- [Adding a user](https://loop.cloud.microsoft/p/eyJ3Ijp7InUiOiJodHRwczovL2p1c3RpY2V1ay5zaGFyZXBvaW50LmNvbS8%2FbmF2PWN6MGxNa1ltWkQxaUlVd3pkMnRqVkdKcVRHdExVamhRVjNSbGNYWllTalJrT1RVelpGTlFOMXBLYWxkaVZHMVBNVFJHY2pkT1FtZDJSVFU1ZW1SVWNWcHhkVXBHZVU1aGNsWW1aajB3TVVwSk5rdExOVm96VVVsUU5qVkdWVTlYTlVoTVVVUXpTVFF6VnpSWFVEWlZKbU05Sm1ac2RXbGtQVEUlM0QiLCJyIjpmYWxzZX0sInAiOnsidSI6Imh0dHBzOi8vanVzdGljZXVrLnNoYXJlcG9pbnQuY29tL2NvbnRlbnRzdG9yYWdlL0NTUF83MTI0N2MyZi1lMzM2LTQyMmUtOTFmMC1mNWFkN2FhYmQ3MjcvRG9jdW1lbnQlMjBMaWJyYXJ5L0xvb3BBcHBEYXRhL0FkZGluZyUyMGElMjBVc2VyJTIwdG8lMjB0aGUlMjBJbmdlc3Rpb24lMjBTZXJ2aWNlLmxvb3A%2FbmF2PWN6MGxNa1pqYjI1MFpXNTBjM1J2Y21GblpTVXlSa05UVUY4M01USTBOMk15WmkxbE16TTJMVFF5TW1VdE9URm1NQzFtTldGa04yRmhZbVEzTWpjbVpEMWlJVXd6ZDJ0alZHSnFUR3RMVWpoUVYzUmxjWFpZU2pSa09UVXpaRk5RTjFwS2FsZGlWRzFQTVRSR2NqZE9RbWQyUlRVNWVtUlVjVnB4ZFVwR2VVNWhjbFltWmowd01VcEpOa3RMTlRJMk1sbzNNa05EUlRaVlJrWlpVVTlVTkRaQlZsRXpSa3RRSm1NOUpUSkdKbVpzZFdsa1BURSUzRCIsInIiOmZhbHNlfSwiaSI6eyJpIjoiOTU1NTVmZTAtMTFmMi00YmMyLTk1ZmUtNTFhZTZjOGVkOWFlIn19)
- [Impersonating an AWS Transfer Family user](https://loop.cloud.microsoft/p/eyJ3Ijp7InUiOiJodHRwczovL2p1c3RpY2V1ay5zaGFyZXBvaW50LmNvbS8%2FbmF2PWN6MGxNa1ltWkQxaUlVd3pkMnRqVkdKcVRHdExVamhRVjNSbGNYWllTalJrT1RVelpGTlFOMXBLYWxkaVZHMVBNVFJHY2pkT1FtZDJSVFU1ZW1SVWNWcHhkVXBHZVU1aGNsWW1aajB3TVVwSk5rdExOVm96VVVsUU5qVkdWVTlYTlVoTVVVUXpTVFF6VnpSWFVEWlZKbU05Sm1ac2RXbGtQVEUlM0QiLCJyIjpmYWxzZX0sInAiOnsidSI6Imh0dHBzOi8vanVzdGljZXVrLnNoYXJlcG9pbnQuY29tL2NvbnRlbnRzdG9yYWdlL0NTUF83MTI0N2MyZi1lMzM2LTQyMmUtOTFmMC1mNWFkN2FhYmQ3MjcvRG9jdW1lbnQlMjBMaWJyYXJ5L0xvb3BBcHBEYXRhL0ltcGVyc29uYXRpbmclMjBhbiUyMEFXUyUyMFRyYW5zZmVyJTIwRmFtaWx5JTIwdXNlci5sb29wP25hdj1jejBsTWtaamIyNTBaVzUwYzNSdmNtRm5aU1V5UmtOVFVGODNNVEkwTjJNeVppMWxNek0yTFRReU1tVXRPVEZtTUMxbU5XRmtOMkZoWW1RM01qY21aRDFpSVV3emQydGpWR0pxVEd0TFVqaFFWM1JsY1haWVNqUmtPVFV6WkZOUU4xcEthbGRpVkcxUE1UUkdjamRPUW1kMlJUVTVlbVJVY1ZweGRVcEdlVTVoY2xZbVpqMHdNVXBKTmt0TE5UVlNXRVpTUTBWTVNVaFFUa2N5TlVFMlRESkpRVFkyVnpkR0ptTTlKVEpHSm1ac2RXbGtQVEUlM0QiLCJyIjpmYWxzZX0sImkiOnsiaSI6Ijk1NTU1ZmUwLTExZjItNGJjMi05NWZlLTUxYWU2YzhlZDlhNCJ9fQ%3D%3D)
- [Using the analytical-platform user](https://loop.cloud.microsoft/p/eyJ3Ijp7InUiOiJodHRwczovL2p1c3RpY2V1ay5zaGFyZXBvaW50LmNvbS8%2FbmF2PWN6MGxNa1ltWkQxaUlVd3pkMnRqVkdKcVRHdExVamhRVjNSbGNYWllTalJrT1RVelpGTlFOMXBLYWxkaVZHMVBNVFJHY2pkT1FtZDJSVFU1ZW1SVWNWcHhkVXBHZVU1aGNsWW1aajB3TVVwSk5rdExOVm96VVVsUU5qVkdWVTlYTlVoTVVVUXpTVFF6VnpSWFVEWlZKbU05Sm1ac2RXbGtQVEUlM0QiLCJyIjpmYWxzZX0sInAiOnsidSI6Imh0dHBzOi8vanVzdGljZXVrLnNoYXJlcG9pbnQuY29tL2NvbnRlbnRzdG9yYWdlL0NTUF83MTI0N2MyZi1lMzM2LTQyMmUtOTFmMC1mNWFkN2FhYmQ3MjcvRG9jdW1lbnQlMjBMaWJyYXJ5L0xvb3BBcHBEYXRhL1VzaW5nJTIwdGhlJTIwJTYwYW5hbHl0aWNhbC1wbGF0Zm9ybSU2MCUyMFVzZXIubG9vcD9uYXY9Y3owbE1rWmpiMjUwWlc1MGMzUnZjbUZuWlNVeVJrTlRVRjgzTVRJME4yTXlaaTFsTXpNMkxUUXlNbVV0T1RGbU1DMW1OV0ZrTjJGaFltUTNNamNtWkQxaUlVd3pkMnRqVkdKcVRHdExVamhRVjNSbGNYWllTalJrT1RVelpGTlFOMXBLYWxkaVZHMVBNVFJHY2pkT1FtZDJSVFU1ZW1SVWNWcHhkVXBHZVU1aGNsWW1aajB3TVVwSk5rdExOVEpJUzAxRFJFbExSVkJhUmtaYVZqVmFWbEkyVkVFeVNWVTFKbU05SlRKR0ptWnNkV2xrUFRFJTNEIiwiciI6ZmFsc2V9LCJpIjp7ImkiOiI5NTU1NWZlMC0xMWYyLTRiYzItOTVmZS01MWFlNmM4ZWQ5ODYifX0%3D)

For user-facing guidance for the ingestion service, please refer to the [guidance page](https://user-guidance.analytical-platform.service.justice.gov.uk/tools/ingestion/)

### Ingestion service diagrams

![Ingestion diagram 1](./ap-ingestion-01.excalidraw.png)

![Ingestion diagram 2](./ap-ingestion-02.excalidraw.png)
